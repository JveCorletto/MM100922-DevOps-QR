(()=>{var e={};e.id=209,e.ids=[209],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},44982:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>o}),t(34603),t(20445),t(35866);var r=t(23191),a=t(88716),n=t(37922),i=t.n(n),l=t(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["surveys",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,34603)),"C:\\Projects\\MM100922-DevOps-QR\\app\\surveys\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,20445)),"C:\\Projects\\MM100922-DevOps-QR\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Projects\\MM100922-DevOps-QR\\app\\surveys\\page.tsx"],d="/surveys/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/surveys/page",pathname:"/surveys",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5589:(e,s,t)=>{Promise.resolve().then(t.bind(t,37518)),Promise.resolve().then(t.t.bind(t,79404,23))},37518:(e,s,t)=>{"use strict";t.d(s,{Actions:()=>l,CopyLink:()=>i});var r=t(10326),a=t(17577),n=t(35047);function i({slug:e}){let[s,t]=(0,a.useState)(!1);return r.jsx("button",{className:"btn outline",onClick:async()=>{let s="undefined"!=typeof location?`${location.origin}/s/${e}`:`/s/${e}`;try{await navigator.clipboard.writeText(s),t(!0),setTimeout(()=>t(!1),1500)}catch{console.error("No se pudo copiar")}},title:"Copiar enlace",children:s?"\xa1Copiado!":"Copiar enlace"})}function l({id:e,status:s,slug:t}){let i=(0,n.useRouter)(),[l,c]=(0,a.useTransition)(),[o,u]=(0,a.useState)({status:s,slug:t}),d=s=>{c(async()=>{let t=await fetch(`/api/surveys/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s})});if(!t.ok)return;let r=await t.json();u({status:r.status,slug:r.slug??o.slug}),i.refresh()})};return"draft"===o.status?r.jsx("button",{className:"btn primary",onClick:()=>d("publish"),disabled:l,children:l?"Publicando…":"Publicar"}):"published"===o.status?r.jsx("button",{className:"btn danger",onClick:()=>d("close"),disabled:l,children:l?"Cerrando…":"Cerrar"}):r.jsx("button",{className:"btn primary",onClick:()=>d("reopen"),disabled:l,children:l?"Reabriendo…":"Reabrir"})}},34603:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(19510),a=t(57371),n=t(58585),i=t(30474),l=t(68570);let c=(0,l.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\components\SurveyActions.tsx`),{__esModule:o,$$typeof:u}=c;c.default;let d=(0,l.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\components\SurveyActions.tsx#CopyLink`),p=(0,l.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\components\SurveyActions.tsx#Actions`);async function x(){let e=(0,i.R)(),{data:{user:s}}=await e.auth.getUser();s||(0,n.redirect)("/auth/login");let{data:t,error:l}=await e.from("surveys").select("id, title, description, status, slug, created_at, updated_at").order("created_at",{ascending:!1});if(l)return(0,r.jsxs)("main",{className:"container",children:[(0,r.jsxs)("div",{className:"card",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h1",{style:{margin:0},children:"Mis encuestas"}),r.jsx(a.default,{href:"/surveys/new",className:"btn primary",children:"Nueva encuesta"})]}),r.jsx("div",{className:"card",style:{marginTop:".8rem"},children:(0,r.jsxs)("p",{children:["No fue posible cargar tus encuestas: ",l.message]})})]});let c=t??[];return(0,r.jsxs)("main",{className:"container",children:[(0,r.jsxs)("div",{className:"card",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h1",{style:{margin:0},children:"Mis encuestas"}),r.jsx(a.default,{href:"/surveys/new",className:"btn primary",children:"Nueva encuesta"})]}),0===c.length?(0,r.jsxs)("div",{className:"card",style:{marginTop:".8rem"},children:[r.jsx("p",{children:"A\xfan no tienes encuestas."}),r.jsx(a.default,{href:"/surveys/new",className:"btn",children:"Crear la primera"})]}):r.jsx("div",{className:"card",style:{marginTop:".8rem"},children:r.jsx("ul",{className:"grid",style:{gap:".6rem",listStyle:"none",padding:0,margin:0},children:c.map(e=>r.jsx("li",{className:"card",style:{padding:"0.8rem"},children:(0,r.jsxs)("div",{className:"flex items-center",style:{justifyContent:"space-between",gap:".75rem",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center",style:{gap:".5rem",flexWrap:"wrap"},children:[r.jsx("strong",{children:e.title}),"published"===e.status&&r.jsx("span",{className:"badge",children:"Publicado"}),"draft"===e.status&&r.jsx("span",{className:"badge",style:{background:"rgba(125,117,116,.12)"},children:"Borrador"}),"closed"===e.status&&r.jsx("span",{className:"badge",style:{background:"#d73a49",color:"#fff"},children:"Cerrado"})]}),e.description?r.jsx("p",{style:{margin:".25rem 0 0 0"},children:e.description}):null,(0,r.jsxs)("small",{style:{opacity:.8},children:["Creada: ",function(e){try{return new Date(e).toLocaleString()}catch{return e}}(e.created_at)]})]}),(0,r.jsxs)("div",{className:"flex items-center",style:{gap:".5rem",flexWrap:"wrap"},children:[r.jsx(a.default,{href:`/surveys/${e.id}/edit`,className:"btn outline",children:"Editar"}),r.jsx(p,{id:e.id,status:e.status,slug:e.slug}),"published"===e.status&&e.slug?(0,r.jsxs)(r.Fragment,{children:[r.jsx(a.default,{href:`/s/${e.slug}`,className:"btn",target:"_blank",children:"Ver p\xfablica"}),r.jsx(d,{slug:e.slug})]}):null]})]})},e.id))})})]})}},57371:(e,s,t)=>{"use strict";t.d(s,{default:()=>a.a});var r=t(670),a=t.n(r)},670:(e,s,t)=>{"use strict";let{createProxy:r}=t(68570);e.exports=r("C:\\Projects\\MM100922-DevOps-QR\\node_modules\\next\\dist\\client\\link.js")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,223,137,503],()=>t(44982));module.exports=r})();