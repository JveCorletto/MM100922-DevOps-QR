(()=>{var e={};e.id=109,e.ids=[109],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},21076:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>o}),t(27394),t(20445),t(35866);var r=t(23191),a=t(88716),n=t(37922),l=t.n(n),i=t(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o=["",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,27394)),"C:\\Projects\\MM100922-DevOps-QR\\app\\analytics\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,20445)),"C:\\Projects\\MM100922-DevOps-QR\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Projects\\MM100922-DevOps-QR\\app\\analytics\\page.tsx"],x="/analytics/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/analytics/page",pathname:"/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},23868:(e,s,t)=>{Promise.resolve().then(t.bind(t,17937))},44358:(e,s,t)=>{Promise.resolve().then(t.bind(t,41204)),Promise.resolve().then(t.bind(t,28573)),Promise.resolve().then(t.bind(t,40381))},73057:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},17937:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(10326),a=t(35047),n=t(90434),l=t(17577);function i(){let[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)(!0),[c,o]=(0,l.useState)(null),d=(0,a.useRouter)(),[x,u]=(0,l.useState)(null);if(!x)return null;async function m(){try{i(!0),o(null);let{data:{session:e},error:t}=await x.auth.getSession();if(t)throw console.error("Error de autenticaci\xf3n:",t),Error("Error de autenticaci\xf3n");if(!e){d.push("/auth/login");return}let{data:r,error:a}=await x.from("profiles").select("id").eq("id",e.user.id).single();if(a||!r)throw console.error("Error obteniendo perfil:",a),Error("Perfil de usuario no encontrado");let{data:n,error:l}=await x.from("surveys").select(`
          id,
          title,
          slug,
          status,
          created_at,
          updated_at,
          responses:responses(count)
        `).eq("owner_id",r.id).order("created_at",{ascending:!1});if(l)throw console.error("Error cargando encuestas:",l),l;s(n||[])}catch(e){console.error("Error cargando anal\xedticas:",e),o(e.message||"Error al cargar los datos")}finally{i(!1)}}let h=e.length,p=e.reduce((e,s)=>e+(s.responses?.[0]?.count||0),0),g=e.filter(e=>"published"===e.status).length;return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando anal\xedticas..."})]})}):c?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.698-.833-2.464 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-4",children:c}),(0,r.jsxs)("div",{className:"space-x-3",children:[r.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Reintentar"}),r.jsx("button",{onClick:()=>d.push("/surveys"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Ir a Encuestas"})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Anal\xedticas"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Resumen de todas tus encuestas"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Encuestas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Respuestas Totales"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Encuestas Activas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:g})]})]})})]}),h>0?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Tus Encuestas"}),r.jsx(n.default,{href:"/surveys/new",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Nueva Encuesta"})]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"T\xedtulo"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Respuestas"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["/",e.slug]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"published"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:"published"===e.status?"Publicada":"draft"===e.status?"Borrador":"Cerrada"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:e.responses?.[0]?.count||0}),1===(e.responses?.[0]?.count||0)&&r.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"respuesta"}),(e.responses?.[0]?.count||0)>1&&r.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"respuestas"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx(n.default,{href:`/surveys/${e.id}/analytics`,className:"text-blue-600 hover:text-blue-900 font-medium",children:"Detalles"}),r.jsx(n.default,{href:`/s/${e.slug}`,target:"_blank",className:"text-gray-600 hover:text-gray-900",children:"Vista previa"}),r.jsx(n.default,{href:`/surveys/${e.id}/edit`,className:"text-green-600 hover:text-green-900",children:"Editar"})]})})]},e.id))})]})})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[r.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay encuestas"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Crea tu primera encuesta para comenzar a recolectar respuestas"}),(0,r.jsxs)("div",{className:"space-x-4",children:[r.jsx(n.default,{href:"/surveys/new",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Crear Encuesta"}),r.jsx("button",{onClick:m,className:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Actualizar"})]})]})]})})}t(92550)},41204:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var r=t(10326),a=t(90434),n=t(40381),l=t(17577);t(92550);var i=t(35047);function c(){let[e,s]=(0,l.useState)(null);if(!e)return null;let t=(0,i.useRouter)();(0,i.usePathname)();let[c,o]=(0,l.useState)(!1),{user:d,loading:x}=function(){let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)(!0);return{user:e,loading:t}}(),u=async()=>{try{await e.auth.signOut(),n.ZP.success("Sesi\xf3n cerrada"),t.refresh(),t.push("/")}catch(e){console.error("Error en logout:",e),n.ZP.error("No se pudo cerrar sesi\xf3n")}},m=()=>{o(!1)};return(0,r.jsxs)("nav",{className:"nav",children:[(0,r.jsxs)("div",{className:"nav-inner container",children:[(0,r.jsxs)(a.default,{href:"/",className:"brand",onClick:m,children:["Surveys\xa0",r.jsx("span",{className:"badge",children:"UFG"})]}),r.jsx("button",{className:"sm:hidden btn","aria-controls":"mobile-menu","aria-expanded":c,onClick:()=>o(e=>!e),children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsx("div",{className:"hidden sm:flex items-center gap-3",children:x?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"})]}):(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(a.default,{href:"/surveys",onClick:m,children:"Mis encuestas"}),r.jsx(a.default,{href:"/analytics",onClick:m,children:"Anal\xedtica"})]}),d?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(a.default,{href:"/profile",className:"btn outline",title:"Ver/editar perfil",onClick:m,children:d.name}),r.jsx("button",{className:"btn",onClick:u,children:"Cerrar Sesi\xf3n"})]}):r.jsx(a.default,{href:"/auth/login",className:"btn primary",onClick:m,children:"Iniciar Sesi\xf3n"})]})})]}),r.jsx("div",{id:"mobile-menu",className:`sm:hidden ${c?"block":"hidden"} border-t border-[rgba(125,117,116,0.15)] bg-[rgba(250,245,233,0.95)]`,children:r.jsx("div",{className:"container py-2 space-y-1",children:x?(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]}):(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(a.default,{href:"/surveys",className:"block px-2 py-2 rounded-md hover:bg-white",onClick:m,children:"Mis encuestas"}),r.jsx(a.default,{href:"/analytics",className:"block px-2 py-2 rounded-md hover:bg-white",onClick:m,children:"Anal\xedtica"}),r.jsx(a.default,{href:"/profile",className:"block px-2 py-2 rounded-md hover:bg-white",onClick:m,children:d.name}),r.jsx("button",{onClick:u,className:"block w-full text-center px-2 py-2 rounded-md btn",children:"Cerrar Sesi\xf3n"})]}),!d&&r.jsx(a.default,{href:"/auth/login",className:"block px-2 py-2 rounded-md btn primary w-full text-center",onClick:m,children:"Iniciar Sesi\xf3n"})]})})})]})}},28573:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});var r=t(17577);function a(){let[e,s]=(0,r.useState)(null);return null}t(92550)},92550:(e,s,t)=>{"use strict";t(99806)},27394:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=t(68570);let a=(0,r.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\app\analytics\page.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\app\analytics\page.tsx#default`)},20445:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g,metadata:()=>h,viewport:()=>p});var r=t(19510);t(67272);var a=t(68570);let n=(0,a.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\components\NavBar.tsx`),{__esModule:l,$$typeof:i}=n;n.default;let c=(0,a.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\components\NavBar.tsx#default`);var o=t(19125);let d=(0,a.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\components\SessionInitializer.tsx`),{__esModule:x,$$typeof:u}=d;d.default;let m=(0,a.createProxy)(String.raw`C:\Projects\MM100922-DevOps-QR\components\SessionInitializer.tsx#default`),h={title:"Sistema de Encuestas con QR",description:"Crea, publica y analiza encuestas con acceso por QR o enlace p\xfablico"},p={width:"device-width",initialScale:1};function g({children:e}){return r.jsx("html",{lang:"es",children:(0,r.jsxs)("body",{children:[r.jsx(m,{}),r.jsx(c,{}),e,r.jsx(o.x7,{position:"top-center",toastOptions:{style:{background:"#FAF5E9",color:"#4A4544",border:"1px solid #C1E1C1",borderRadius:"12px",fontSize:"0.95rem"},success:{iconTheme:{primary:"#9FB982",secondary:"#FAF5E9"}},error:{iconTheme:{primary:"#B84D4D",secondary:"#FAF5E9"}}}}),(0,r.jsxs)("footer",{className:"footer container",children:["\xa9 ",new Date().getFullYear()," UFG Surveys"]})]})})}},38238:(e,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(e,s,t){let r=Reflect.get(e,s,t);return"function"==typeof r?r.bind(e):r}static set(e,s,t,r){return Reflect.set(e,s,t,r)}static has(e,s){return Reflect.has(e,s)}static deleteProperty(e,s){return Reflect.deleteProperty(e,s)}}},67272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,137],()=>t(21076));module.exports=r})();