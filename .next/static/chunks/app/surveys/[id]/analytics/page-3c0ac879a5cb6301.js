(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{70199:function(e,s,t){Promise.resolve().then(t.bind(t,24496))},24496:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return R}});var a=t(57437),l=t(16463),r=t(2265);function n(e){let{summary:s}=e,t=[{title:"Total Respuestas",value:s.total_responses.toString(),icon:"\uD83D\uDCCA",change:"+12% desde ayer",color:"blue",description:"Total de respuestas recibidas"},{title:"Tasa de Completitud",value:"".concat(s.completion_rate,"%"),icon:"✅",change:"+3% desde la semana pasada",color:"green",description:"Porcentaje de preguntas respondidas"},{title:"Tiempo Promedio",value:s.avg_response_time,icon:"⏱️",change:"-1.2m desde el mes pasado",color:"purple",description:"Tiempo promedio por encuesta"},{title:"Dispositivos M\xf3viles",value:"".concat(s.device_stats.mobile_percentage,"%"),icon:"\uD83D\uDCF1",change:"+5% desde la semana pasada",color:"orange",description:"Porcentaje de respuestas desde m\xf3viles"}],l=e=>{switch(e){case"blue":return"bg-blue-50 border-blue-200 text-blue-800";case"green":return"bg-green-50 border-green-200 text-green-800";case"purple":return"bg-purple-50 border-purple-200 text-purple-800";case"orange":return"bg-orange-50 border-orange-200 text-orange-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}};return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-xl p-5 transition-all hover:shadow-md ".concat(l(e.color)),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium opacity-80",children:e.title}),(0,a.jsx)("p",{className:"text-3xl font-bold mt-2",children:e.value}),(0,a.jsx)("p",{className:"text-sm mt-1 opacity-75",children:e.description})]}),(0,a.jsx)("div",{className:"text-3xl",children:e.icon})]}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t border-opacity-30",children:(0,a.jsx)("p",{className:"text-sm",children:e.change})})]},s))})}var i=t(35231),d=t(25974),c=t(54142),o=t(2842),x=t(9542),m=t(85475),h=t(45745),u=t(68295);let p=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function g(e){let{data:s,question:t}=e,l=[...s].sort((e,s)=>s.count-e.count);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(d.v,{data:l,margin:{top:20,right:30,left:20,bottom:60},children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(o.K,{dataKey:"option",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12},interval:0}),(0,a.jsx)(x.B,{label:{value:"Respuestas",angle:-90,position:"insideLeft",offset:10}}),(0,a.jsx)(m.u,{content:(0,a.jsx)(e=>{let{active:s,payload:t}=e;return s&&t&&t.length?(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded shadow-lg",children:[(0,a.jsx)("p",{className:"font-semibold",children:t[0].payload.option}),(0,a.jsxs)("p",{className:"text-blue-600",children:[t[0].value," respuestas"]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[t[0].payload.percentage,"%"]})]}):null},{})}),(0,a.jsx)(h.$,{dataKey:"count",name:"Respuestas",radius:[4,4,0,0],children:l.map((e,s)=>(0,a.jsx)(u.b,{fill:p[s%p.length]},"cell-".concat(s)))})]})})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opci\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Respuestas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Porcentaje"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Barra"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:l.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.option}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.count}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.percentage,"%"]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full",style:{width:"".concat(e.percentage,"%"),backgroundColor:p[s%p.length]}})})})]},e.option))})]})})})]})}var j=t(20153);let f=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"];function b(e){let{data:s,question:t}=e,l=[...s].sort((e,s)=>s.count-e.count);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(d.v,{data:l,layout:"vertical",margin:{top:20,right:30,left:100,bottom:20},children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0",horizontal:!1}),(0,a.jsx)(o.K,{type:"number",label:{value:"N\xfamero de selecciones",position:"insideBottom",offset:-10}}),(0,a.jsx)(x.B,{type:"category",dataKey:"option",width:80,tick:{fontSize:12}}),(0,a.jsx)(m.u,{content:(0,a.jsx)(e=>{let{active:s,payload:t}=e;return s&&t&&t.length?(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded shadow-lg",children:[(0,a.jsx)("p",{className:"font-semibold",children:t[0].payload.option}),(0,a.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Respuestas:"}),(0,a.jsx)("span",{className:"font-medium",children:t[0].value})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"% de selecciones:"}),(0,a.jsxs)("span",{className:"text-blue-600",children:[t[0].payload.selection_percentage,"%"]})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"% de encuestados:"}),(0,a.jsxs)("span",{className:"text-green-600",children:[t[0].payload.respondent_percentage,"%"]})]})]})]}):null},{})}),(0,a.jsx)(j.D,{}),(0,a.jsx)(h.$,{dataKey:"count",name:"Selecciones",radius:[0,4,4,0],children:l.map((e,s)=>(0,a.jsx)(u.b,{fill:f[s%f.length]},"cell-".concat(s)))})]})})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opci\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selecciones"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% de selecciones"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% de encuestados"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visualizaci\xf3n"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:l.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.option}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.count}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.selection_percentage,"%"]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.respondent_percentage,"%"]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:f[s%f.length]}}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full",style:{width:"".concat(e.respondent_percentage,"%"),backgroundColor:f[s%f.length]}})})]})})]},e.option))}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-semibold",children:"Total selecciones"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-semibold",children:l.reduce((e,s)=>e+s.count,0)}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"100%"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"-"}),(0,a.jsx)("td",{className:"px-4 py-3"})]})})]})})})]})}var y=t(92566),N=t(16638),v=t(27561),w=t(86991);let D=["#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#10B981","#3B82F6"];function k(e){let{data:s,question:t}=e,l=[...s].sort((e,s)=>e.rating-s.rating),r=l.reduce((e,s)=>e+s.count,0),n=l.reduce((e,s)=>e+s.rating*s.count,0)/r,p={"Negativo (1-2)":l.filter(e=>e.rating<=2).reduce((e,s)=>e+s.percentage,0),"Neutral (3-5)":l.filter(e=>e.rating>=3&&e.rating<=5).reduce((e,s)=>e+s.percentage,0),"Positivo (6-7)":l.filter(e=>e.rating>=6).reduce((e,s)=>e+s.percentage,0)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-blue-800 font-medium",children:"Puntuaci\xf3n promedio"}),(0,a.jsxs)("div",{className:"flex items-end space-x-2 mt-1",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:n.toFixed(2)}),(0,a.jsx)("p",{className:"text-blue-700 mb-1",children:"/ 7"})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"Total respuestas"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-900",children:r})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-purple-800 font-medium",children:"Distribuci\xf3n"}),(0,a.jsx)("div",{className:"flex items-center space-x-4 mt-1",children:Object.entries(p).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-900",children:[t.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-purple-700",children:s})]},s)})})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Distribuci\xf3n por calificaci\xf3n"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(d.v,{data:l,margin:{top:20,right:30,left:20,bottom:20},children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(o.K,{dataKey:"rating",label:{value:"Calificaci\xf3n (1-7)",position:"insideBottom",offset:-10}}),(0,a.jsx)(x.B,{label:{value:"N\xfamero de respuestas",angle:-90,position:"insideLeft",offset:10}}),(0,a.jsx)(m.u,{content:(0,a.jsx)(e=>{let{active:s,payload:t}=e;if(s&&t&&t.length){let e=t[0].payload;return(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:D[e.rating-1]}}),(0,a.jsxs)("p",{className:"font-semibold",children:["Calificaci\xf3n: ",e.rating,"/7"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Respuestas:"}),(0,a.jsx)("span",{className:"font-medium",children:e.count})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Porcentaje:"}),(0,a.jsxs)("span",{className:"text-blue-600",children:[e.percentage,"%"]})]})]})]})}return null},{})}),(0,a.jsx)(h.$,{dataKey:"count",name:"Respuestas",radius:[4,4,0,0],children:l.map((e,s)=>(0,a.jsx)(u.b,{fill:D[e.rating-1]},"cell-".concat(s)))})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Tendencia de distribuci\xf3n"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.w,{data:l,children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(o.K,{dataKey:"rating"}),(0,a.jsx)(x.B,{}),(0,a.jsx)(m.u,{}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"percentage",name:"Porcentaje %",stroke:"#3B82F6",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Distribuci\xf3n acumulativa"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(v.T,{data:l,children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(o.K,{dataKey:"rating"}),(0,a.jsx)(x.B,{}),(0,a.jsx)(m.u,{}),(0,a.jsx)(w.u,{type:"monotone",dataKey:"percentage",name:"Porcentaje acumulado",stroke:"#10B981",fill:"#10B981",fillOpacity:.3})]})})})]})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Calificaci\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etiqueta"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Respuestas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Porcentaje"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distribuci\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:l.map(e=>{var s;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold",style:{backgroundColor:D[e.rating-1]},children:e.rating})})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:{1:"Totalmente en desacuerdo",2:"En desacuerdo",3:"Parcialmente en desacuerdo",4:"Neutral",5:"Parcialmente de acuerdo",6:"De acuerdo",7:"Totalmente de acuerdo"}[s=e.rating]||"Calificaci\xf3n ".concat(s)}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.count}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.percentage,"%"]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full",style:{width:"".concat(e.percentage,"%"),backgroundColor:D[e.rating-1]}})})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.rating<=2?"bg-red-100 text-red-800":e.rating>=6?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.rating<=2?"Bajo":e.rating>=6?"Alto":"Medio"})})]},e.rating)})})]})})})]})}function _(e){let{words:s,width:t=800,height:l=400}=e,n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!n.current||0===s.length)return;let e=n.current.getContext("2d");if(!e)return;e.clearRect(0,0,t,l);let a=Math.max(...s.map(e=>e.count)),r=Math.min(...s.map(e=>e.count)),i=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],d=t/2,c=l/2,o=Math.min(t,l)/2-50,x=[],m=(e,s,t)=>{for(let a of x){let l=e-a.x,r=s-a.y;if(Math.sqrt(l*l+r*r)<t+a.radius+5)return!0}return!1};[...s].sort((e,s)=>s.count-e.count).slice(0,50).forEach((s,n)=>{let h=Math.max(14,Math.min(50,12+(s.count-r)/(a-r)*36));e.font="".concat(h,"px Arial");let u=e.measureText(s.word).width,p=Math.sqrt(u*u+h*h)/2,g=!1,j=0;for(;!g&&j<100;){let t=2*Math.random()*Math.PI,l=++j/100*o,r=d+Math.cos(t)*l,n=c+Math.sin(t)*l;if(!m(r,n,p)){let t=Math.floor(s.count/a*(i.length-1));e.fillStyle=i[t],e.font="bold ".concat(h,"px Arial"),e.shadowColor="rgba(0, 0, 0, 0.1)",e.shadowBlur=3,e.shadowOffsetX=1,e.shadowOffsetY=1,e.fillText(s.word,r-u/2,n+h/4),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,x.push({x:r,y:n,radius:p}),g=!0}}if(!g)for(let r=0;r<50;r++){let r=Math.random()*(t-100)+50,n=Math.random()*(l-100)+50;if(!m(r,n,p)){let t=Math.floor(s.count/a*(i.length-1));e.fillStyle=i[t],e.font="bold ".concat(h,"px Arial"),e.fillText(s.word,r-u/2,n+h/4),x.push({x:r,y:n,radius:p});break}}})},[s,t,l]),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("canvas",{ref:n,width:t,height:l,className:"w-full h-auto border border-gray-200 rounded-lg"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4 justify-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-sm bg-blue-500 mr-1"}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Menos frecuente"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-sm bg-purple-500 mr-1"}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Frecuente"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-sm bg-red-500 mr-1"}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Muy frecuente"})]})]})]})}function C(e){let{data:s,question:t}=e,[l,n]=(0,r.useState)("list"),[i,d]=(0,r.useState)(""),c=s.sample_responses.filter(e=>e.text.toLowerCase().includes(i.toLowerCase()));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-blue-800 font-medium",children:"Total respuestas"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:s.total_responses})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"Palabras promedio"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-900",children:s.average_word_count})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-purple-800 font-medium",children:"Caracteres promedio"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-900",children:s.average_length})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800 font-medium",children:"Palabras \xfanicas"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-amber-900",children:s.word_frequencies.length})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>n("list"),className:"px-4 py-2 rounded-lg transition-colors ".concat("list"===l?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCB Lista"}),(0,a.jsx)("button",{onClick:()=>n("cloud"),className:"px-4 py-2 rounded-lg transition-colors ".concat("cloud"===l?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"☁️ Nube de palabras"}),(0,a.jsx)("button",{onClick:()=>n("stats"),className:"px-4 py-2 rounded-lg transition-colors ".concat("stats"===l?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCA Estad\xedsticas"})]}),(0,a.jsx)("div",{className:"w-full sm:w-auto",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar en respuestas...",value:i,onChange:e=>d(e.target.value),className:"w-full sm:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:"\uD83D\uDD0D"})]})})]}),"list"===l&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Respuestas de texto (",c.length,")"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Mostrando las \xfaltimas respuestas recibidas"})]}),(0,a.jsx)("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:c.length>0?c.map((e,s)=>(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("p",{className:"text-gray-900",children:e.text}),(0,a.jsxs)("div",{className:"flex space-x-2 text-xs text-gray-500 ml-4 whitespace-nowrap",children:[(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:[e.word_count," palabras"]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:[e.length," caracteres"]})]})]})},s)):(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No hay respuestas que coincidan con la b\xfasqueda."})})})]}),"cloud"===l&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Nube de palabras"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Palabras m\xe1s frecuentes en las respuestas"})]}),(0,a.jsx)(_,{words:s.word_frequencies.slice(0,50)}),(0,a.jsx)("div",{className:"mt-4 text-sm text-gray-600",children:(0,a.jsx)("p",{children:"Tama\xf1o = frecuencia • Color = categor\xeda"})})]}),"stats"===l&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Palabras m\xe1s frecuentes"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:s.word_frequencies.slice(0,24).map((e,t)=>(0,a.jsxs)("div",{className:"p-3 rounded-lg border ".concat(t<5?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:e.word}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat(t<5?"bg-blue-100 text-blue-800":"bg-gray-200 text-gray-700"),children:e.count})]}),(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-1",children:(0,a.jsx)("div",{className:"h-1 rounded-full bg-blue-500",style:{width:"".concat(e.count/s.word_frequencies[0].count*100,"%")}})})]},e.word))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.shortest_response&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Respuesta m\xe1s corta"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:[s.shortest_response.length," caracteres"]})]}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded",children:(0,a.jsxs)("p",{className:"text-gray-900 italic",children:['"',s.shortest_response.text,'"']})})]}),s.longest_response&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Respuesta m\xe1s larga"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[s.longest_response.length," caracteres"]})]}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded",children:(0,a.jsxs)("p",{className:"text-gray-900 italic",children:['"',s.longest_response.text,'"']})})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Distribuci\xf3n de longitud"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{children:"0-50 caracteres (cortas)"}),(0,a.jsxs)("span",{children:[Math.round(s.sample_responses.filter(e=>e.length<=50).length/s.sample_responses.length*100),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-blue-400",style:{width:"".concat(s.sample_responses.filter(e=>e.length<=50).length/s.sample_responses.length*100,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{children:"51-200 caracteres (medias)"}),(0,a.jsxs)("span",{children:[Math.round(s.sample_responses.filter(e=>e.length>50&&e.length<=200).length/s.sample_responses.length*100),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-blue-500",style:{width:"".concat(s.sample_responses.filter(e=>e.length>50&&e.length<=200).length/s.sample_responses.length*100,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{children:"201+ caracteres (largas)"}),(0,a.jsxs)("span",{children:[Math.round(s.sample_responses.filter(e=>e.length>200).length/s.sample_responses.length*100),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-blue-600",style:{width:"".concat(s.sample_responses.filter(e=>e.length>200).length/s.sample_responses.length*100,"%")}})})]})]})]})]})]})}function E(e){let{question:s,index:t}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-800 rounded-full font-semibold",children:t}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:s.question_text})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:"single"===s.type?"Opci\xf3n \xfanica":"multiple"===s.type?"Opci\xf3n m\xfaltiple":"likert"===s.type?"Escala Likert":"Texto libre"}),(0,a.jsxs)("span",{children:[s.response_count," respuestas"]}),s.required&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded",children:"Obligatoria"})]})]}),s.analytics.most_selected&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"M\xe1s seleccionado"}),(0,a.jsxs)("p",{className:"font-semibold",children:[s.analytics.most_selected.option,(0,a.jsxs)("span",{className:"ml-2 text-blue-600",children:["(",s.analytics.most_selected.percentage,"%)"]})]})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(()=>{switch(s.type){case"single":return(0,a.jsx)(g,{data:s.analytics.chart_data,question:s.question_text});case"multiple":return(0,a.jsx)(b,{data:s.analytics.chart_data,question:s.question_text});case"likert":return(0,a.jsx)(k,{data:s.analytics.chart_data,question:s.question_text});case"text":return(0,a.jsx)(C,{data:s.analytics,question:s.question_text});default:return(0,a.jsx)("p",{children:"Tipo de pregunta no soportado para gr\xe1ficos."})}})()}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Tasa de respuesta"}),(0,a.jsx)("p",{className:"font-medium",children:s.response_count>0?"".concat(Math.round(s.response_count/s.response_count*100),"%"):"0%"})]}),"likert"===s.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Puntuaci\xf3n promedio"}),(0,a.jsx)("p",{className:"font-medium",children:s.analytics.average_rating})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Mediana"}),(0,a.jsx)("p",{className:"font-medium",children:s.analytics.median_rating})]})]}),"multiple"===s.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Selecciones por respuesta"}),(0,a.jsx)("p",{className:"font-medium",children:s.analytics.avg_selections_per_response})]})]})})]})}function B(e){var s;let{data:t}=e,l=t.map(e=>({...e,shortDate:new Date(e.date).toLocaleDateString("es-ES",{weekday:"short"}),day:new Date(e.date).getDate(),month:new Date(e.date).toLocaleDateString("es-ES",{month:"short"})})),r=l.map((e,s)=>({...e,cumulative:l.slice(0,s+1).reduce((e,s)=>e+s.count,0)})),n=l.map((e,s)=>{let t=l.slice(Math.max(0,s-2),s+1),a=t.reduce((e,s)=>e+s.count,0)/t.length;return{...e,movingAverage:parseFloat(a.toFixed(2))}}),u=e=>{let{active:s,payload:t,label:l}=e;if(s&&t&&t.length){var r;let e=null===(r=t[0])||void 0===r?void 0:r.payload;return(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded shadow-lg min-w-[200px]",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900 mb-2",children:e?new Date(e.date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):l}),(0,a.jsx)("div",{className:"space-y-1",children:t.map((e,s)=>(0,a.jsxs)("p",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color||e.fill}}),(0,a.jsxs)("span",{className:"text-gray-600",children:[e.name,":"]})]}),(0,a.jsx)("span",{className:"font-bold ml-2",children:e.value})]},s))})]})}return null},p=(null===(s=r[r.length-1])||void 0===s?void 0:s.cumulative)||0,g=t.length>0?Math.round(t.reduce((e,s)=>e+s.count,0)/t.length):0,j={count:0,date:""};if(t.length>0){let e=Math.max(...t.map(e=>e.count)),s=t.find(s=>s.count===e);s&&(j={count:e,date:new Date(s.date).toLocaleDateString("es-ES",{weekday:"short"})})}let f=function(e){if(e.length<2)return"0";let s=Math.floor(e.length/2),t=e.slice(0,s),a=e.slice(s),l=t.reduce((e,s)=>e+s.count,0)/t.length,r=a.reduce((e,s)=>e+s.count,0)/a.length;return 0===l?r>0?"100":"0":((r-l)/Math.abs(l)*100).toFixed(1)}(t);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(v.T,{data:r,children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(o.K,{dataKey:"shortDate",tick:{fontSize:12},label:{value:"D\xeda de la semana",position:"insideBottom",offset:-5}}),(0,a.jsx)(x.B,{label:{value:"Respuestas",angle:-90,position:"insideLeft",offset:10}}),(0,a.jsx)(m.u,{content:(0,a.jsx)(u,{})}),(0,a.jsx)(w.u,{type:"monotone",dataKey:"count",name:"Respuestas diarias",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.2,strokeWidth:2}),(0,a.jsx)(w.u,{type:"monotone",dataKey:"cumulative",name:"Total acumulado",stroke:"#10B981",fill:"#10B981",fillOpacity:.1,strokeWidth:1,strokeDasharray:"3 3"})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Respuestas por d\xeda"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(d.v,{data:l,children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(o.K,{dataKey:"shortDate",tick:{fontSize:12}}),(0,a.jsx)(x.B,{}),(0,a.jsx)(m.u,{content:(0,a.jsx)(u,{})}),(0,a.jsx)(h.$,{dataKey:"count",name:"Respuestas",fill:"#8B5CF6",radius:[4,4,0,0]})]})})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Tendencia y promedio m\xf3vil"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.w,{data:n,children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(o.K,{dataKey:"shortDate",tick:{fontSize:12}}),(0,a.jsx)(x.B,{}),(0,a.jsx)(m.u,{content:(0,a.jsx)(u,{})}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"count",name:"Respuestas",stroke:"#3B82F6",strokeWidth:2,dot:{r:4}}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"movingAverage",name:"Promedio m\xf3vil (3 d\xedas)",stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})})})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total per\xedodo"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:p})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Promedio diario"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"D\xeda pico"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[j.count,(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-600 ml-2",children:["(",j.date,")"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Crecimiento"}),(0,a.jsxs)("p",{className:"text-2xl font-bold flex items-center",children:[Number(f)>0?"\uD83D\uDCC8":"\uD83D\uDCC9",(0,a.jsxs)("span",{className:"ml-2 ".concat(Number(f)>0?"text-green-600":"text-red-600"),children:[f,"%"]})]})]})]})})]})}var F=t(23909),S=t(85369);function M(e){let{stats:s}=e,t=[{name:"M\xf3vil",value:s.mobile,percentage:s.mobile_percentage,color:"#3B82F6"},{name:"Desktop",value:s.desktop,percentage:s.desktop_percentage,color:"#10B981"},{name:"Tablet",value:s.tablet,percentage:s.tablet_percentage,color:"#F59E0B"}],l=Object.entries(s.browsers||{}).map(e=>{let[s,t]=e;return{name:s,value:t}}).sort((e,s)=>s.value-e.value).slice(0,5),r=Object.entries(s.operating_systems||{}).map(e=>{let[s,t]=e;return{name:s,value:t}}).sort((e,s)=>s.value-e.value).slice(0,5);return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6",children:"An\xe1lisis de Dispositivos"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Distribuci\xf3n por dispositivo"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(F.u,{children:[(0,a.jsx)(S.b,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:t.map((e,s)=>(0,a.jsx)(u.b,{fill:e.color},"cell-".concat(s)))}),(0,a.jsx)(m.u,{content:(0,a.jsx)(e=>{let{active:s,payload:t}=e;return s&&t&&t.length?(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded shadow-lg",children:[(0,a.jsx)("p",{className:"font-semibold",children:t[0].name}),(0,a.jsxs)("p",{className:"text-blue-600",children:[t[0].value," respuestas"]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[t[0].payload.percentage,"%"]})]}):null},{})}),(0,a.jsx)(j.D,{})]})})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Top Navegadores"}),(0,a.jsx)("div",{className:"space-y-3",children:l.map((e,t)=>{let l=e.value/(s.mobile+s.desktop+s.tablet)*100;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:function(e){let s=e.toLowerCase();return s.includes("chrome")?"\uD83C\uDF10":s.includes("firefox")?"\uD83E\uDD8A":s.includes("safari")?"\uD83C\uDF4E":s.includes("edge")?"⚫":s.includes("opera")?"\uD83C\uDFAD":"\uD83D\uDCBB"}(e.name)}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-blue-500",style:{width:"".concat(l,"%")}})}),(0,a.jsxs)("span",{className:"text-sm font-semibold w-10 text-right",children:[l.toFixed(1),"%"]})]})]},e.name)})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Navegador m\xe1s popular: ",(0,a.jsx)("span",{className:"font-semibold",children:s.top_browser})]})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Top Sistemas Operativos"}),(0,a.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>{let l=e.value/(s.mobile+s.desktop+s.tablet)*100;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:function(e){let s=e.toLowerCase();return s.includes("windows")?"\uD83E\uDE9F":s.includes("mac")||s.includes("ios")?"\uD83C\uDF4E":s.includes("android")?"\uD83E\uDD16":s.includes("linux")?"\uD83D\uDC27":"\uD83D\uDCBB"}(e.name)}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-green-500",style:{width:"".concat(l,"%")}})}),(0,a.jsxs)("span",{className:"text-sm font-semibold w-10 text-right",children:[l.toFixed(1),"%"]})]})]},e.name)})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["SO m\xe1s popular: ",(0,a.jsx)("span",{className:"font-semibold",children:s.top_os})]})})]})]})]})}function q(e){let{surveyId:s}=e,[t,l]=(0,r.useState)(!1),n=async e=>{try{l(!0);let t=await fetch("/api/surveys/".concat(s,"/analytics/export?format=").concat(e));if(!t.ok)throw Error("Error al exportar");if("csv"===e){let e=await t.blob(),a=window.URL.createObjectURL(e),l=document.createElement("a");l.href=a,l.download="encuesta_".concat(s,"_").concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(a),document.body.removeChild(l)}else{let e=await t.json();console.log("Data:",e)}}catch(e){console.error("Export error:",e),alert("Error al exportar los datos")}finally{l(!1)}};return(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{onClick:()=>n("csv"),disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Exportando..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83D\uDCE5"}),(0,a.jsx)("span",{children:"Exportar Datos"})]})}),(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border hidden group-hover:block",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>n("csv"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{children:"CSV (Excel)"})]}),(0,a.jsxs)("button",{onClick:()=>n("json"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC4"}),(0,a.jsx)("span",{children:"JSON"})]}),(0,a.jsxs)("button",{onClick:()=>n("excel"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC8"}),(0,a.jsx)("span",{children:"Excel avanzado"})]})]})})]})}var O=t(62100);function R(){let[e,s]=(0,r.useState)(null);if((0,r.useEffect)(()=>{s((0,O.V)())},[]),!e)return null;let{id:t}=(0,l.useParams)(),i=(0,l.useRouter)(),{data:d,loading:c,error:o,refetch:x}=function(e){let[s,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let s=async()=>{try{l(!0),i(null);let a=await fetch("/api/surveys/".concat(e,"/analytics"),{credentials:"include"});if(!a.ok){let e=await a.text();throw Error("Error ".concat(a.status,": ").concat(e))}let r=await a.json();if(console.log("API Response:",r),r.success&&r.data){var s;let e={...r.data,summary:{...r.data.summary,completion_rate:String((null===(s=r.data.summary)||void 0===s?void 0:s.completion_rate)||"0")}};t(e)}else throw Error(r.error||"Error al cargar los datos")}catch(e){console.error("Error fetching analytics:",e),i(e instanceof Error?e.message:"Error desconocido al cargar anal\xedtica"),t(null)}finally{l(!1)}};e&&s()},[e]),{data:s,loading:a,error:n,refetch:async()=>{l(!0),i(null);try{let s=await fetch("/api/surveys/".concat(e,"/analytics"),{credentials:"include"});if(!s.ok)throw Error("Error al recargar datos");let a=await s.json();a.success&&a.data&&t(a.data)}catch(e){i(e instanceof Error?e.message:"Error desconocido")}finally{l(!1)}}}}(t),[m,h]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{(async()=>{let e=(0,O.V)(),{data:{session:s}}=await e.auth.getSession();s?h(!0):i.push("/auth/login")})()},[i]),c||!m)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"},s))}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg mb-6"}),(0,a.jsx)("div",{className:"h-96 bg-gray-200 rounded-lg"})]})});if(o)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"text-red-600 text-2xl mr-3",children:"⚠️"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-red-800",children:"Error al cargar anal\xedtica"})]}),(0,a.jsx)("p",{className:"text-red-700 mb-4",children:o}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>x(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Reintentar"}),(0,a.jsx)("button",{onClick:()=>i.push("/surveys"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Volver a encuestas"})]})]})})});if(!d)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCCA"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Sin datos disponibles"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Esta encuesta a\xfan no tiene respuestas. Comparte el enlace para comenzar a recibir respuestas."})]})});let{survey:u,summary:p,questions:g}=d;return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:u.title}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["Anal\xedtica de respuestas • ",p.total_responses," respuestas"]}),u.description&&(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:u.description})]}),(0,a.jsxs)("div",{className:"mt-4 md:mt-0 flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>i.push("/surveys/".concat(t,"/edit")),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Editar Encuesta"}),(0,a.jsx)(q,{surveyId:t})]})]}),(0,a.jsx)(n,{summary:p}),p.response_trend&&p.response_trend.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Tendencia de respuestas (\xfaltimos 7 d\xedas)"}),(0,a.jsx)(B,{data:p.response_trend})]}),p.device_stats&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsx)(M,{stats:p.device_stats})}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Anal\xedtica por pregunta"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[g.filter(e=>e.response_count>0).length," de ",g.length," preguntas tienen respuestas"]})]}),0===g.length?(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:(0,a.jsx)("p",{className:"text-yellow-800",children:"Esta encuesta no tiene preguntas configuradas."})}):g.filter(e=>e.response_count>0).map((e,s)=>(0,a.jsx)(E,{question:e,index:s+1},e.id)),g.filter(e=>0===e.response_count).length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Preguntas sin respuestas"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.filter(e=>0===e.response_count).map(e=>(0,a.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,a.jsx)("p",{className:"font-medium",children:e.question_text}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:"single"===e.type?"Opci\xf3n \xfanica":"multiple"===e.type?"Opci\xf3n m\xfaltiple":"likert"===e.type?"Escala Likert":"Texto libre"}),e.required&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-800 rounded",children:"Obligatoria"})]})]},e.id))})]})]}),(0,a.jsx)("div",{className:"mt-12 pt-8 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["Datos actualizados al: ",new Date().toLocaleString()]}),(0,a.jsxs)("p",{children:["ID de la encuesta: ",(0,a.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:u.id})]})]}),(0,a.jsx)("div",{className:"mt-4 md:mt-0",children:(0,a.jsx)("button",{onClick:()=>x(),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:"Actualizar datos"})})]})})]})}},62100:function(e,s,t){"use strict";t.d(s,{V:function(){return r}});var a=t(35570);let l=null;function r(){return l||(l=(0,a.createBrowserClient)("https://jfagkzxzkbslpohhojuh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmYWdrenh6a2JzbHBvaGhvanVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0NDIyNjQsImV4cCI6MjA3ODAxODI2NH0.y8rKE8CyNK54GkqRRDalX5hyPy1YrG8NVj6mr2sgKPU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1}}))}}},function(e){e.O(0,[570,969,971,23,744],function(){return e(e.s=70199)}),_N_E=e.O()}]);