(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{89816:function(e,n,a){Promise.resolve().then(a.bind(a,97083))},97083:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return t}});var i=a(57437),r=a(2265),l=a(88726),s=a(62100);function t(){let[e,n]=(0,r.useState)(null);if((0,r.useEffect)(()=>{n((0,s.V)())},[]),!e)return null;let[a,t]=(0,r.useState)(""),[o,c]=(0,r.useState)({display_name:"",phone:"",genero:"",fecha_nacimiento:""}),[d,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{var n,a,i,r;let{data:{user:l},error:s}=await e.auth.getUser();if(s||!l){window.location.href="/auth/login";return}t(l.email||"");let{data:o}=await e.from("profiles").select("display_name, phone, genero, fecha_nacimiento").eq("id",l.id).single();c({display_name:null!==(n=null==o?void 0:o.display_name)&&void 0!==n?n:"",phone:null!==(a=null==o?void 0:o.phone)&&void 0!==a?a:"",genero:null!==(i=null==o?void 0:o.genero)&&void 0!==i?i:"",fecha_nacimiento:null!==(r=null==o?void 0:o.fecha_nacimiento)&&void 0!==r?r:""}),u(!1)})()},[e]);let p=async()=>{m(!0);let{data:{user:n}}=await e.auth.getUser();if(!n)return;let{error:a}=await e.from("profiles").update({display_name:o.display_name||null,phone:o.phone||null,genero:o.genero||null,fecha_nacimiento:o.fecha_nacimiento||null}).eq("id",n.id);if(m(!1),a)return l.ZP.error(a.message);l.ZP.success("Perfil actualizado")},f=async()=>{if(!a)return l.ZP.error("No se encontr\xf3 correo de sesi\xf3n");let{error:n}=await e.auth.resetPasswordForEmail(a,{redirectTo:"".concat(location.origin,"/auth/update-password")});if(n)return l.ZP.error(n.message);l.ZP.success("Enviamos un enlace para cambiar tu contrase\xf1a")};return d?(0,i.jsx)("main",{className:"container section",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("p",{children:"Cargando perfil…"})})}):(0,i.jsx)("main",{className:"container section",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h1",{style:{marginTop:0},children:"Mi perfil"}),(0,i.jsxs)("div",{className:"grid grid-2",style:{marginTop:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Nombre para mostrar"}),(0,i.jsx)("input",{value:o.display_name||"",onChange:e=>c(n=>({...n,display_name:e.target.value})),placeholder:"Ej. Andr\xe9 Mart\xednez"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Correo"}),(0,i.jsx)("input",{value:a,disabled:!0})]})]}),(0,i.jsxs)("div",{className:"grid grid-2",style:{marginTop:".5rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Tel\xe9fono"}),(0,i.jsx)("input",{value:o.phone||"",onChange:e=>c(n=>({...n,phone:e.target.value})),placeholder:"Ej. +503 7777 7777"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"G\xe9nero"}),(0,i.jsxs)("select",{value:o.genero||"",onChange:e=>c(n=>({...n,genero:e.target.value})),children:[(0,i.jsx)("option",{value:"",children:"Seleccione…"}),(0,i.jsx)("option",{value:"Masculino",children:"Masculino"}),(0,i.jsx)("option",{value:"Femenino",children:"Femenino"}),(0,i.jsx)("option",{value:"Otro",children:"Otro"})]})]})]}),(0,i.jsxs)("div",{style:{marginTop:".5rem"},children:[(0,i.jsx)("label",{children:"Fecha de nacimiento"}),(0,i.jsx)("input",{type:"date",value:o.fecha_nacimiento||"",onChange:e=>c(n=>({...n,fecha_nacimiento:e.target.value}))})]}),(0,i.jsxs)("div",{className:"stack",style:{marginTop:"1rem"},children:[(0,i.jsx)("button",{className:"btn primary",onClick:p,disabled:h,children:h?"Guardando…":"Guardar cambios"}),(0,i.jsx)("button",{className:"btn outline",onClick:f,children:"Cambiar contrase\xf1a (correo)"})]})]})})}},62100:function(e,n,a){"use strict";a.d(n,{V:function(){return l}});var i=a(35570);let r=null;function l(){return r||(r=(0,i.createBrowserClient)("https://jfagkzxzkbslpohhojuh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmYWdrenh6a2JzbHBvaGhvanVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0NDIyNjQsImV4cCI6MjA3ODAxODI2NH0.y8rKE8CyNK54GkqRRDalX5hyPy1YrG8NVj6mr2sgKPU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1}}))}}},function(e){e.O(0,[570,726,971,23,744],function(){return e(e.s=89816)}),_N_E=e.O()}]);